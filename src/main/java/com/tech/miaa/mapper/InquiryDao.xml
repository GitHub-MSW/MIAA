<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<!-- dao의 인터페이스 주소 -->
<mapper namespace="com.tech.miaa.dao.InquiryDao">
	<insert id="inquiry_wirte">
		INSERT INTO USER_INQUIRY_BOARD VALUES(#{param1},BOARD_NUM_SEQ.NEXTVAL,#{param2},#{param3},SYSDATE,DEFAULT,#{param4})
	</insert>
	<select id="inquiry_list" resultType="com.tech.miaa.dto.InquiryDto">
		SELECT BOARD_NUM,RNUM,BOARD_TITLE,BOARD_REPLY_STATUS,BOARD_REGISTRATION_DATE FROM (SELECT ROWNUM RNUM, N.* FROM (SELECT BOARD_NUM,BOARD_TITLE,BOARD_REPLY_STATUS,TO_CHAR(BOARD_REGISTRATION_DATE,'YYYY-MM-DD') BOARD_REGISTRATION_DATE FROM USER_INQUIRY_BOARD WHERE USER_ID=#{param1}) N ORDER BY BOARD_NUM DESC) WHERE RNUM BETWEEN #{param2} AND #{param3} ORDER BY RNUM ASC
	</select>
	<select id="modify_list" resultType="com.tech.miaa.dto.InquiryDto">
		SELECT BOARD_NUM,BOARD_TITLE,BOARD_CONTENT,BOARD_FILESRC FROM USER_INQUIRY_BOARD WHERE BOARD_NUM=#{param1} AND USER_ID=#{param2}
	</select>
	<select id="detail_list" resultType="com.tech.miaa.dto.InquiryDto">
		SELECT BOARD_NUM,BOARD_TITLE,BOARD_CONTENT,TO_CHAR(BOARD_REGISTRATION_DATE,'YYYY-MM-DD') BOARD_REGISTRATION_DATE,BOARD_FILESRC,BOARD_REPLY_STATUS FROM USER_INQUIRY_BOARD WHERE BOARD_NUM=#{param1} AND USER_ID=#{param2}
	</select>
	<delete id="delete">
		DELETE FROM USER_INQUIRY_BOARD WHERE BOARD_NUM=#{param1} AND USER_ID=#{param2}
	</delete>
	<update id="inquiry_modify">
		UPDATE USER_INQUIRY_BOARD SET BOARD_TITLE=#{param3},BOARD_CONTENT=#{param4},BOARD_FILESRC=#{param5} WHERE BOARD_NUM=#{param1} AND USER_ID=#{param2}
	</update>
	<update id="inquiry_modify_present">
		UPDATE USER_INQUIRY_BOARD SET BOARD_TITLE=#{param3},BOARD_CONTENT=#{param4},BOARD_FILESRC=#{param5} WHERE BOARD_NUM=#{param1} AND USER_ID=#{param2}
	</update>
	<select id="total" resultType="Integer">
		SELECT COUNT(*) FROM USER_INQUIRY_BOARD
	</select>
</mapper>